<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Page Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/swiffy-slider@1.6.0/dist/css/swiffy-slider.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/header-style.css">
    <link rel="stylesheet" href="~/css/booking-style.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
</head>
        <div class="container booking-container">
            <div class="screen-container">
                <div class="screen-caption">ЕКРАН</div>
                <div class="screen-img"><img src="~/img/screen.png"></div>
@*         <div class="seat seat-blocked"></div> <!-- seat-blocked - місце заброньовано іншим користувачем -->
 *@
                <div class="seat-container">
                    @for (int i = 0; i < 10; i++)
                    {
                        <div class="seat-row">
                            @for (int j = 0; j < 15; j++)
                            {
                                <div class="seat"></div>
                            }
                        </div>
                    }
                </div>
            </div>
            <div class="film-book-container">
                <div class="film-info-container">
                    <img src="~/img/poster-sm.png"> <!-- Постер фільма (малий) -->
                    <div class="film-info">
                        <div class="film-info-name">Титанік</div> <!-- Назва фільму -->
                        <div class="film-data"><span>2г 18хв <!-- Довжина фільму --></span> | <span class="film-info-rating"> 9.9<!-- Рейтинг фільму --></span></div>
                        <div class="film-trailer-button activate-modal">
                            <p>Трейлер</p>
                        </div>
                    </div>
                </div>
                <div class="line"></div>
                <div class="film-params-container">
                    <div class="params-row">
                        <div class="row-name">ДАТА</div>
                        <div class="row-buttons">
                            <!-- Дати фільму -->
                            <div class="row-button date date-active">19.05</div>
                            <div class="row-button date">20.05</div>
                            <div class="row-button date">22.05</div>
                            <div class="row-button date">23.05</div>
                            <!-- Дати фільму -->
                        </div>
                    </div>
                    <div class="params-row">
                        <div class="params-row">
                            <div class="row-name">ЧАС</div>
                        </div>
                        <div class="row-buttons">
                            <!-- Час фільму -->
                            <div class="row-button time">12:00</div>
                            <div class="row-button time">17:00</div>
                            <div class="row-button time">20:00</div>
                            <!-- Час фільму -->
                        </div>
                    </div>
                    <div class="params-row">
                        <div class="params-row">
                            <div class="row-name">ЗАЛ</div>
                        </div>
                        <div class="row-buttons">
                            <!-- Зала фільму -->
                            <div class="row-button hall-red">Red</div> <!-- Червона -->
                            <div class="row-button hall-green">Green</div> <!-- Зелена-->
                            <div class="row-button hall-blue">Blue</div> <!-- Синя-->
                            <!-- Зала фільму -->
                        </div>
                    </div>
                </div>
                <div class="single-seat-price">Ціна місця: 275₴</div> <!-- Ціна 1 місця-->
                <div class="line"></div>
                <!-- Заброньовані місця -->
                <div class="booked-seats" id="booked-seats">
                    
                </div>
                <!-- Заброньовані місця -->
                <div class="total-price">Всього: 0₴</div> <!-- Загальна ціна -->
                <input type="submit" value="BUY" class="buy-button">
                <button class="buy-button" onclick="initializeTickets()">Придбати квиток</button>
        </div>
        </div>

        <div id="myModal" class="modal">
            <span class="close">&times;</span>
            <video id="videoPlayer" width="100%" height="65%" controls> <!-- Трейлер фільму -->
                <source src="/img/trailer.mp4" type="video/mp4">
            </video>
            <div class="text-block container">
                <div class="modal-info-container d-flex">
                    <div class="modal-film-info">
                        <div class="film-name side-elem">URI: The Cock And Balls Removal</div> <!-- Назва фільма -->
                        <div class="film-elem side-elem"><b>Categories: </b>Action, Drama, History <!-- Список категорій --></div> 
                        <div class="film-elem side-elem"><b>Year: </b>2019 <!-- Рік фільму --></div>
                        <div class="film-elem side-elem"><b>Duration:</b> 2H 18m <!-- Довжина фільму --></div>
                        <div class="film-elem side-elem"><b>Stars:</b> Vicky Kaushal, Paresh Rawal, Mohit Raina <!-- Актори --></div>
                        <div class="film-elem side-elem"><b>Description:</b>Lorem ipsum dolor sit amet consectetur
                            adipisicing elit. Ut provident, natus sunt, explicabo iure cum ea odio ex quis
                            tenetur vero in sint earum, inventore voluptatibus aliquam hic deserunt quidem?
                            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos dolore velit ex, rerum
                            culpa amet. Dignissimos labore obcaecati asperiores optio est, consequatur non rem
                            exercitationem ipsam quasi fuga voluptate iure. <!-- Опис --></div>
                    </div>
                    <div class="modal-film-side">
                        <div class="film-rating">9,9 <!-- Рейтинг --></div>
                        <img src="~/img/poster-sm.png"> <!-- Постер -->
                    </div>
                </div>
            </div>
        </div>

<form id="ticketForm">
    <div>
        <label for="Price">Price</label>
        <input type="text" id="Price" name="Price" />
    </div>
    <div>
        <label for="Showtime">Showtime</label>
        <input type="datetime-local" id="Showtime" name="Showtime" />
    </div>
    <div>
        <label for="HallNumber">Hall Number</label>
        <input type="text" id="HallNumber" name="HallNumber" />
    </div>
    <div>
        <label for="RowNumber">Row Number</label>
        <input type="text" id="RowNumber" name="RowNumber" />
    </div>
    <div>
        <label for="SeatNumber">Seat Number</label>
        <input type="text" id="SeatNumber" name="SeatNumber" />
    </div>
    <div>
        <label for="MovieId">Movie ID</label>
        <input type="text" id="MovieId" name="MovieId" />
    </div>
    <div>
        <label for="UserId">User ID</label>
        <input type="text" id="UserId" name="UserId" />
    </div>
    <button type="button" onclick="createTicket()">Create Ticket</button>
</form>

<script>
    async function createTicket() {
        const form = document.getElementById('ticketForm');
        const formData = new FormData(form);

        const localShowtime = formData.get('Showtime');
        const showtime = new Date(localShowtime);
        const utcShowtime = new Date(showtime.getTime() - (showtime.getTimezoneOffset() * 60000)).toISOString();

        const data = {
            Price: parseFloat(formData.get('Price')),
            Showtime: utcShowtime,
            HallNumber: parseInt(formData.get('HallNumber')),
            RowNumber: parseInt(formData.get('RowNumber')),
            SeatNumber: parseInt(formData.get('SeatNumber')),
            MovieId: parseInt(formData.get('MovieId')),
            UserId: formData.get('UserId')
        };

        try {
            const response = await fetch('/api/ticket/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            if (response.ok) {
                const result = await response.json();
                alert('Success: ' + result.message);
            } else {
                const error = await response.json();
                alert('Error: ' + error.message + ' Details: ' + error.details);
            }
        } catch (error) {
            alert('Error: ' + error);
        }
    }
</script>

    <script src="~/js/seach-button.js"></script>
    <script src="~/js/trailer-modal.js"></script>
    <script src="~/js/seat-numeration.js"></script>
    <script src="~/js/seat-calc.js"></script>