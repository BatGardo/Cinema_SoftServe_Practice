@model Cinema_Project.ViewModels.CombinedMovieViewModel


<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Page Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/swiffy-slider@1.6.0/dist/css/swiffy-slider.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/header-style.css">
    <link rel="stylesheet" href="~/css/index-style.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css" />
</head>

<body>
    <main>
        <h1 class="slider-caption" style="margin-bottom: -30px;"><b>POPULAR <span
                    style="color:red; filter: drop-shadow(0px 0px 10px red);">NOW</span></b></h1>
        <div class="slider-container-2">
            <div class="swiffy-slider slider-item-show2-sm slider-item-reveal slider-item-ratio
             slider-item-nogap slider-item-nosnap-touch slider-nav-arrow slider-nav-visible
             slider-nav-autohide slider-nav-page slider-indicators-round slider-indicators-outside slider-nav-animation slider-nav-animation-scale"
                data-slider-nav-autoplay-interval="5000">
                <ul class="slider-container">






                    @* Треба фіксанути відображення останнього слайду і розмірність*@
                    @foreach (var movie in Model.Movies.Take(10))
                    {
                        <li class="slide-invisible slide-visible">

                            <div class="single-slide" id="@movie.MovieId" style="background-image: url('@Url.Content("~/img/" + movie.Title + ".jpg")');">
                                <div class="film-info-container">
                                    <div class="film-rating">@movie.Rating</div>
                                    <div class="film-name">@movie.Title</div>
                                    <div class="film-elem"><b>Categories: </b>
                                    @foreach (var genre in movie.MovieGenres)
                                    {
                                            <span>@genre.Genre.Title</span>
                                    }
                                    </div>
                                    <div class="film-elem"><b>Year: </b>@movie.ReleaseDate.ToLocalTime().ToString("yyyy-MM-dd")</div>
                                    <div class="film-elem"><b>Duration:</b>@($"{movie.Duration / 60}:{(movie.Duration % 60):D2}")</div>
                                    <div class="film-elem"><b>Stars:</b>
                                        @foreach (var actor in movie.MovieActors)
                                        {
                                            <span>@actor.Actor.FirstName</span>
                                            <span>@actor.Actor.LastName</span>
                                        }
                                    </div>
                                    <div class="film-elem"><b>Description:</b>@movie.Description</div>
                                    <div class="film-buttons">
                                        <button class="film-buy-tickets"><a class="a-buy-tickets" asp-area="" asp-controller="Booking" asp-action="BookingView">Buy tickets</a></button>
                                        <div class="film-trailer-button">
                                            <p>Watch Trailer</p>
                                        </div>
                                    </div>
                                </div>
                        </li>
                    }
                    @* Треба фіксанути відображення останнього слайду і розмірність*@










                </ul>
                <button type="button" class="slider-nav left-button"></button>
                <button type="button" class="slider-nav slider-nav-next right-button"></button>
            </div>
        </div>
        <h1 class="slider-caption" style="margin-bottom: 70px;"><b>BASED ON<span
                    style="color:red; filter: drop-shadow(0px 0px 10px red);"> YOUR </span>WATCH HISTORY</b></h1>
        <div class="slider-wrapper">
            <ul class="slider-items">





                <div id="moviesContainer">
                    @foreach (var movie in Model.Movies.Take(2))
                    {
                        <img class="reel-svg" src="./img/reel_start.svg" alt="SVG Icon">
                        <li class="slider-item movie" id="slider-item"
                            style="background-image: url('@("https://m.media-amazon.com/images/M/MV5BMTU2NjA1ODgzMF5BMl5BanBnXkFtZTgwMTM2MTI4MjE@._V1_.jpg")');">
                        <div class="slider-film-name">@movie.Title</div>
                        <div class="slider-film-slogan">
                            @foreach (var genre in movie.MovieGenres)
                            {
                            <span>@genre.Genre.Title</span>
                            }
                        </div>
                        <div class="slider-film-year">@movie.ReleaseDate.ToLocalTime().ToString("yyyy-MM-dd")</div>
                            <input type="button" class="slider-film-button" value="Трейлер">
                        </li>
                        

@*                             <h2>@movie.Title</h2>
                            <p>@movie.Description</p>
                            <p>Release Date: </p>
                            <p>Duration: @movie.Duration</p>
                            <p>Rating: @movie.Rating</p>
                            <p>
                                Genres:
                                @if (movie.MovieGenres != null)
                                {
                                    @foreach (var genre in movie.MovieGenres)
                                    {
                                        <span>@genre.Genre.Title</span>
                                    }
                                }
                            </p>
                            <button type="button" class="btn btn-primary btn-sm float-end"
                                    onclick="showMovieDetails(@movie.MovieId)">
                                More
                            </button>*@
                    }

                    @* Зміни на закриваючий IMG *@
                <img class="reel-svg" src="./img/reel_start.svg" alt="SVG Icon">

                </div>


        <h1>Slider high rating in genre</h1>
        <div class="slider-wrapper">
            <ul class="slider-items">


                <div class="dropdown" id="myDropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" aria-haspopup="true" aria-expanded="false">
                        Dropdown button
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                @foreach (var genre in Model.Genres)
                                {
                            <label>
                                <input type="checkbox" id="@genre.GenreId" onchange="filterMovies()"> @genre.Title
                            </label>
                                }
                    </div>
                </div>


                <div id="moviesContainer">
                    @foreach (var movie in Model.Movies)
                    {
                        <img class="reel-svg" src="./img/reel_start.svg" alt="SVG Icon">
                        <li class="slider-item movie" id="slider-item"
                            style="background-image: url('@("https://m.media-amazon.com/images/M/MV5BMTU2NjA1ODgzMF5BMl5BanBnXkFtZTgwMTM2MTI4MjE@._V1_.jpg")');">
                        <div class="slider-film-name">@movie.Title</div>
                        <div class="slider-film-slogan">
                            @foreach (var genre in movie.MovieGenres)
                            {
                            <span>@genre.Genre.Title</span>
                            }
                        </div>
                        <div class="slider-film-year">@movie.ReleaseDate.ToLocalTime().ToString("yyyy-MM-dd")</div>
                            <input type="button" class="slider-film-button" value="Трейлер">
                        </li>


                        @*                             <h2>@movie.Title</h2>
                        <p>@movie.Description</p>
                        <p>Release Date: </p>
                        <p>Duration: @movie.Duration</p>
                        <p>Rating: @movie.Rating</p>
                        <p>
                        Genres:
                        @if (movie.MovieGenres != null)
                        {
                        @foreach (var genre in movie.MovieGenres)
                        {
                        <span>@genre.Genre.Title</span>
                        }
                        }
                        </p>
                        <button type="button" class="btn btn-primary btn-sm float-end"
                        onclick="showMovieDetails(@movie.MovieId)">
                        More
                        </button>*@
                    }

                    @* Зміни на закриваючий IMG *@
                <img class="reel-svg" src="./img/reel_start.svg" alt="SVG Icon">

        </div>

        

        <div id="myModal" class="modal">
            <span class="close">&times;</span>
            <video id="videoPlayer" width="100%" height="65%" controls>
                <source src="/img/trailer.mp4" type="video/mp4">
            </video>
            <div class="text-block container">
                <div class="modal-info-container d-flex">
                    <div class="modal-film-info">
                        <div class="film-name side-elem">URI: The Cock And Balls Removal</div>
                        <div class="film-elem side-elem"><b>Categories: </b>Action, Drama, History</div>
                        <div class="film-elem side-elem"><b>Year: </b>2019</div>
                        <div class="film-elem side-elem"><b>Duration:</b> 2h 18m</div>
                        <div class="film-elem side-elem"><b>Stars:</b> Vicky Kaushal, Paresh Rawal, Mohit Raina</div>
                        <div class="film-elem side-elem"><b>Description:</b>Lorem ipsum dolor sit amet consectetur
                            adipisicing elit. Ut provident, natus sunt, explicabo iure cum ea odio ex quis
                            tenetur vero in sint earum, inventore voluptatibus aliquam hic deserunt quidem?
                            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos dolore velit ex, rerum
                            culpa amet. Dignissimos labore obcaecati asperiores optio est, consequatur non rem
                            exercitationem ipsam quasi fuga voluptate iure.</div>
                    </div>
                    <div class="modal-film-side">
                        <div class="film-rating">9,9</div>
                        <img src="./img/poster-sm.png">
                        <input type="button" class="film-buy-tickets" value="Buy tickets">
                    </div>
                </div>
            </div>
        </div>
    </main>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <script src="./js/seach-button.js"></script>

    <script src="~/js/swiper.js"></script>
    <script src="~/js/slider.js"></script>
    <script src="~/js/trailer-modal.js"></script>
    <script src="~/js/swiper-mutation.js"></script>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var dropdown = document.getElementById('myDropdown');
            var dropdownMenu = dropdown.querySelector('.dropdown-menu');

            dropdown.addEventListener('click', function (event) {
                var target = event.target;
                if (target.getAttribute('aria-haspopup')) {
                    if (dropdownMenu.classList.contains('show')) {
                        dropdownMenu.classList.remove('show');
                    } else {
                        dropdownMenu.classList.add('show');
                    }
                }
            });

            // Закрыть выпадающее меню при клике вне его области
            document.addEventListener('click', function (event) {
                if (!dropdown.contains(event.target)) {
                    dropdownMenu.classList.remove('show');
                }
            });

            // Функция для фильтрации фильмов
            function filterMovies() {
                var selectedGenres = [];
                var checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
                checkboxes.forEach(function (checkbox) {
                    selectedGenres.push(parseInt(checkbox.id));
                });

                var movies = document.querySelectorAll('.movie');
                movies.forEach(function (movie) {
                    var movieGenresAttr = movie.getAttribute('data-genres');
                    if (movieGenresAttr) {
                        var movieGenres = movieGenresAttr.split(',').map(Number);
                        var shouldDisplay = selectedGenres.length === 0 || movieGenres.some(genre => selectedGenres.includes(genre));
                        movie.style.display = shouldDisplay ? 'block' : 'none';
                    } else {
                        movie.style.display = 'none'; // Скрыть фильм, если у него нет атрибута data-genres
                    }
                });
            }

            // Добавить обработчик события для чекбоксов
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(function (checkbox) {
                checkbox.addEventListener('change', filterMovies);
            });
        });

    </script>






</body>




</html>




